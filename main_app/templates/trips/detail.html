{% extends 'base.html' %} 
{% load static %} 
{% block head %}
<link rel="stylesheet" href="{% static 'css/trips/trip-detail.css' %}" />

{% endblock %} 
{% block content %}
<section class="cat-container">
  <h1>Destination: {{ trip.location }}</h1>

  <div class="cat-img">
    <img src="{% static 'images/cactus.png' %}" alt="A whimsical origami cactus" />
  </div>
  <div class="cat-details">
    
        {% if trip.date > today %}
        <h3>Your upcoming {{ trip.location }} trip</h3>
        {% elif trip.date == today %}
        <h3>Your current {{ trip.location }} trip</h3>
        {% else %}
        <h3>Your past {{ trip.location }} trip</h3>
        {% endif %}

        <h4>Depart: {{trip.start_date}}</h4>
        <h4>Return: {{trip.end_date}} </h4>
        <h3>Companion: {{trip.companion}}</h3>
        <h3>Emergency Contact: {{trip.emergency_contact}}</h3>
        <h3>Transportation: {{trip.transportation}}</h3>
        <h3>Lodging: {{trip.lodging}}</h3>
        <h3>Attractions: {{trip.old_attractions}}</h3>
        <p>Notes: {{ trip.notes }}</p>


  </div>
  <div class="cat-actions">
    <a href="{% url 'trip-update' trip.id %}" class="btn warn">Edit</a>
    <a href="{% url 'trip-delete' trip.id %}" class="btn danger">Delete</a>
  </div>
</section>

{% comment %} <div class="feedings-toy-container">
  <section class="feedings">
    <div class="subsection-title">
      <h2>Transportation</h2>
      <img src="{% static 'images/cat-onigiri.svg' %}" alt="A cat as onigiri" />
    </div>
    <h3>Add Transportation</h3>
    <form 
      action="{% url 'add-transportation' trip.id %}"
      method="post" 
      class="subsection-content" 
      autocomplete="off"
    >
      {% csrf_token %} 
      {{ transportation_form.as_p }}
      <button type="submit" class="btn submit">Add transportation</button>
    </form>
    <h3>Scheduled Transportation</h3>
    {% if trip.transportation_stretch_set.all.count %}
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Company</th>
          <th>Departure Location</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for transportation_stretch in trip.transportation_stretch_set.all %}
          <tr>
            <td>{{transportation_stretch.type}}</td>
            <td>{{transportation_stretch.company}}</td>
            <td>{{transportation_stretch.departure_location}}</td>
            <td>
              {% comment %} <a href='{% url '' transportation_stretch.id %}' class='btn warn'>Edit</a>
              <a href='{% url '' transportation_stretch.id %}' class='btn danger'>Delete</a> 
            </td>      
          </tr>
        {% endfor %}
      </tbody>
    </table>
        {% else %}
          <div class="subsection-content">
            <p>‚ö†Ô∏è You haven't scheduled a way to get to {{trip.location}} yet!</p>
          </div>
        {% endif %}
  </section>
</div> {% endcomment %}

<section class="toys">
  <div class="subsection-title">
    <h2>Attractions</h2>
    <img src="{% static 'images/flower.png' %}" alt="A whimsical origami flower" />
    <img src="{% static 'images/flower.png' %}" alt="A whimsical origami flower" />
    <img src="{% static 'images/flower.png' %}" alt="A whimsical origami flower" />
  </div>

  <h3>{{ trip.location }}'s attractions</h3>
  <div class="subsection-content">
    {% if trip.attractions.count %} 
      {% for attraction in trip.attractions.all %}
        <div class="toy-container">
          <div class="color-block" style="background-color: {{ toy.color }}"></div>
          <a href="{% url 'attraction-detail' attraction.id %}">
            <p>{{ attraction.name }}</p>
          </a>
            <form action="{% url 'remove-attraction' trip.id attraction.id %}" method="post">
  {% csrf_token %}
  <button type="submit" class="btn btn-danger">Remove Attraction</button>
</form>

        </div>
      {% endfor %} 
    {% else %}
      <p class="no-toys">{{trip.location}} doesn't have anything scheduled!</p>
    {% endif %}
  </div>


  <h3>Things you can do on your trip:</h3>
  <div class="subsection-content">
    {% if attractions.count %}
        {% for attraction in attractions %}
          <div class="toy-container">
            <div class="color-block" style="background-color: {{ toy.color }}"></div>
            <p>{{ attraction.name }}</p>
            <form action="{% url 'associate-attraction' trip.id attraction.id %}" method="post">
              {% csrf_token %}
              <button type="submit" class="btn submit">Add Attraction</button>
            </form>
          </div>
        {% endfor %}
    {% else %}
        <p class="all-toys">{{trip.location}} already has all the available attractionsü•≥</p>
    {% endif %}
  </div>
</section>

{% endblock %}